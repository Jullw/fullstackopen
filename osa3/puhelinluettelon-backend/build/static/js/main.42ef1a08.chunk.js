(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(15),a=t.n(r),o=t(6),u=t(3),s=t(4),i=t.n(s),l="/api/persons",d=function(){return i.a.get(l).then((function(e){return e.data}))},j=function(e){return i.a.post(l,e).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),O=function(e){var n=e.searchName,t=e.handleSearch;return Object(f.jsxs)("div",{children:["search: ",Object(f.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.addPerson,t=e.newNumber,c=e.newName,r=e.handleNameChange,a=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:c,onChange:r})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:t,onChange:a})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:" add"})})]})},x=function(e){var n=e.personsToShow,t=e.handleClick;return Object(f.jsx)("div",{children:n.map((function(e){return Object(f.jsx)(v,{person:e,handleClick:t},e.name)}))})},v=function(e){var n=e.person,t=e.handleClick;return Object(f.jsx)("div",{children:Object(f.jsxs)("p",{children:[" ",n.name," ",n.number," ",Object(f.jsx)(p,{handleClick:function(){return t(n.id,n.name)}})]})})},p=function(e){var n=e.handleClick;return Object(f.jsx)("button",{onClick:n,children:" Delete "})},g=function(e){var n=e.text;return Object(f.jsx)("div",{className:"error",children:Object(f.jsxs)("h2",{children:[" ",n," "]})})},w=function(e){var n=e.text;return Object(f.jsx)("div",{className:"success",children:Object(f.jsxs)("h2",{children:[" ",n," "]})})},C=function(e){var n=e.type,t=e.text;return"success"===n?Object(f.jsx)(w,{text:t}):"error"===n?Object(f.jsx)(g,{text:t}):null},N=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),i=s[0],l=s[1],v=Object(c.useState)(""),p=Object(u.a)(v,2),g=p[0],w=p[1],N=Object(c.useState)(""),S=Object(u.a)(N,2),k=S[0],y=S[1],L=Object(c.useState)(""),D=Object(u.a)(L,2),P=D[0],A=D[1],E=Object(c.useState)(""),J=Object(u.a)(E,2),T=J[0],B=J[1];Object(c.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var I=function(){var e=t.find((function(e){return e.name.toLowerCase()===i.toLowerCase()})),n=Object(o.a)(Object(o.a)({},e),{},{number:g});b(n.id,n).then((function(e){B("success"),A("Successfully replaced ".concat(e.name)),r(t.map((function(n){return n.id===e.id?e:n})))})).catch((function(n){B("error"),A("the contact '".concat(e.name,"' was already deleted from server")),r(t.filter((function(n){return n.id!==e.id})))})),l(""),w("")},q=t.filter((function(e){return e.name.toLowerCase().includes(k)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(C,{type:T,text:P}),Object(f.jsx)(O,{searchName:k,handleSearch:function(e){y(e.target.value)}}),Object(f.jsx)("h2",{children:"Add"}),Object(f.jsx)(m,{addPerson:function(e){if(e.preventDefault(),console.log(e.target),i.length>0){var n={name:i,number:g};t.some((function(e){return e.name.toLowerCase()===i.toLowerCase()}))?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))?I():console.log(""):j(n).then((function(e){r(t.concat(e)),A("Added ".concat(e.name)),B("success")})).catch((function(e){console.log(e.response.data.error),A("".concat(e.response.data.error)),B("error")})),l(""),w("")}},newName:i,newNumber:g,handleNameChange:function(e){console.log(e.target.value),l(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),w(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(x,{personsToShow:q,handleClick:function(e,n){window.confirm("Delete ".concat(n," ?"))&&function(e){var n=t.find((function(n){return n.id===e}));h(e).then((function(){r(t.filter((function(n){return n.id!==e}))),B("success"),A("Successfully deleted ".concat(n.name))}))}(e)}})]})};t(39);a.a.render(Object(f.jsx)(N,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.42ef1a08.chunk.js.map